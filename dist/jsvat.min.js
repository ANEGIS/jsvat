var jsvat=function(){"use strict";function r(r,e){return e.test(r)}function e(r,e,i){var t=e.exec(r),s=t[2];return l[i].calcs(s)}function i(i,t,s){var l=!1;return r(i,t)&&(l=e(i,t,s)),l}function t(r){return r.toString().toUpperCase().replace(/(\s|-|\.)+/g,"")}function s(r){return Array.isArray(r)?r:[r]}var l={},u={config:{austria:!0,belgium:!0,bulgaria:!0,croatia:!0,cyprus:!0,czech_republic:!0,denmark:!0,estonia:!0,europe:!0,finland:!0,france:!0,germany:!0,greece:!0,hungary:!0,ireland:!0,italy:!0,latvia:!0,lithunia:!0,luxembourg:!0,malta:!0,netherlands:!0,norway:!0,poland:!0,portugal:!0,romania:!0,russia:!0,serbia:!0,slovakia_republic:!0,slovenia:!0,spain:!0,sweden:!0,switzerland:!0,united_kingdom:!0},checkVAT:function(r,e){if(!r)return!1;r=t(r);var a={isValid:!1,countries:[]};for(var c in l)if(l.hasOwnProperty(c)&&u.config[c]&&u.config[c]!==!1)for(var n=s(l[c].rules.regex),o=0;o<n.length;o++)if(a.isValid=i(r,n[o],c)?!0:a.isValid,a.isValid){if(!e)return a.isValid;a.push(c)}return e?a:a.isValid}};return l.austria={calcs:function(r){for(var e,i,t=0,s=0;7>s;s++)e=r.charAt(s)*this.rules.multipliers[s],t+=e>9?Math.floor(e/10)+e%10:e;return t=10-(t+4)%10,10===t&&(t=0),i=+r.slice(7,8),t===i},rules:{multipliers:[1,2,1,2,1,2,1],regex:/^(AT)U(\d{8})$/}},l.belgium={calcs:function(r){var e;if(9===r.length&&(r="0"+r),0===+r.slice(1,2))return!1;var i=97-+r.slice(0,8)%97;return e=+r.slice(8,10),i===e},rules:{regex:/^(BE)(0?\d{9})$/}},l.bulgaria=function(){function r(r){for(var e,i,t=0,s=0;8>s;s++)t+=+r.charAt(s)*(s+1);if(e=t%11,10!==e)return i=+r.slice(8),e===i;t=0;for(var l=0;8>l;l++)t+=+r.charAt(l)*(l+3);return e=t%11,10===e&&(e=0),i=+r.slice(8),e===i}function e(r,e){var i=0;if(/^\d\d[0-5]\d[0-3]\d\d{4}$/.test(r)){var t=+r.slice(2,4);if(t>0&&13>t||t>20&&33>t||t>40&&53>t){i=0;for(var s=0;9>s;s++)i+=+r.charAt(s)*e.multipliers.physical[s];if(i%=11,10===i&&(i=0),i===+r.substr(9,1))return!0}}return!1}function i(r,e){for(var i=0,t=0;9>t;t++)i+=+r.charAt(t)*e.multipliers.foreigner[t];return i%10===+r.substr(9,1)?!0:void 0}function t(r,e){for(var i=0,t=0;9>t;t++)i+=+r.charAt(t)*e.multipliers.miscellaneous[t];if(i=11-i%11,10===i)return!1;11===i&&(i=0);var s=+r.substr(9,1);return i===s}return{calcs:function(s){return 9===s.length?r(s):e(s,this.rules)||i(s,this.rules)||t(s,this.rules)},rules:{multipliers:{physical:[2,4,8,5,10,9,7,3,6],foreigner:[21,19,17,13,11,9,7,3,1],miscellaneous:[4,3,2,7,6,5,4,3,2]},regex:/^(BG)(\d{9,10})$/}}}(),l.croatia={calcs:function(r){for(var e,i=10,t=0,s=0;10>s;s++)t=(+r.charAt(s)+i)%10,0===t&&(t=10),i=2*t%11;return e=+r.slice(10,11),(i+e)%10===1},rules:{regex:/^(HR)(\d{11})$/}},l.cyprus={calcs:function(r){var e,i=0;if(12===+r.slice(0,2))return!1;for(var t=0;8>t;t++){var s=+r.charAt(t);if(t%2===0)switch(s){case 0:s=1;break;case 1:s=0;break;case 2:s=5;break;case 3:s=7;break;case 4:s=9;break;default:s=2*s+3}i+=s}return i%=26,i=String.fromCharCode(i+65),e=r.substr(8,1),i===e},rules:{regex:/^(CY)([0-59]\d{7}[A-Z])$/}},l.czech_republic={calcs:function(r){var e,i=0;if(this.rules.additional[0].test(r)){for(var t=0;7>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i=11-i%11,10===i&&(i=0),11===i&&(i=1),e=+r.slice(7,8),i===e}if(this.rules.additional[2].test(r)){for(var s=0;7>s;s++)i+=+r.charAt(s+1)*this.rules.multipliers[s];return i=11-i%11,10===i&&(i=0),11===i&&(i=1),e=+r.slice(8,9),this.rules.lookup[i-1]===e}if(this.rules.additional[3].test(r)){var l=+r.slice(0,2)+r.slice(2,4)+r.slice(4,6)+r.slice(6,8)+r.slice(8);return e=+r%11===0,!(l%11!==0||!e)}return!1},rules:{multipliers:[8,7,6,5,4,3,2],lookup:[8,7,6,5,4,3,2,1,0,9,10],regex:/^(CZ)(\d{8,10})(\d{3})?$/,additional:[/^\d{8}$/,/^[0-5][0-9][0|1|5|6]\d[0-3]\d\d{3}$/,/^6\d{8}$/,/^\d{2}[0-3|5-8]\d[0-3]\d\d{4}$/]}},l.denmark={calcs:function(r){for(var e=0,i=0;8>i;i++)e+=+r.charAt(i)*this.rules.multipliers[i];return e%11===0},rules:{multipliers:[2,7,6,5,4,3,2,1],regex:/^(DK)(\d{8})$/}},l.estonia={calcs:function(r){for(var e,i=0,t=0;8>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i=10-i%10,10===i&&(i=0),e=+r.slice(8,9),i===e},rules:{multipliers:[3,7,1,3,7,1,3,7],regex:/^(EE)(10\d{7})$/}},l.europe={calcs:function(r){return!0},rules:{regex:/^(EU)(\d{9})$/}},l.finland={calcs:function(r){for(var e,i=0,t=0;7>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i=11-i%11,i>9&&(i=0),e=+r.slice(7,8),i===e},rules:{multipliers:[7,9,10,5,8,4,2],regex:/^(FI)(\d{8})$/}},l.france={calcs:function(r){var e,i;return/^\d{11}$/.test(r)?(e=+r.substring(2),e=(100*e+12)%97,i=+r.slice(0,2),e===i):!0},rules:{regex:[/^(FR)(\d{11})$/,/^(FR)([A-HJ-NP-Z]\d{10})$/,/^(FR)(\d[A-HJ-NP-Z]\d{9})$/,/^(FR)([A-HJ-NP-Z]{2}\d{9})$/]}},l.germany={calcs:function(r){for(var e,i=10,t=0,s=0,l=0;8>l;l++)t=(+r.charAt(l)+i)%10,0===t&&(t=10),i=2*t%11;return s=11-i===10?0:11-i,e=+r.slice(8,9),s===e},rules:{regex:/^(DE)([1-9]\d{8})$/}},l.greece={calcs:function(r){var e,i=0;8===r.length&&(r="0"+r);for(var t=0;8>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i%=11,i>9&&(i=0),e=+r.slice(8,9),i===e},rules:{multipliers:[256,128,64,32,16,8,4,2],regex:/^(EL)(\d{9})$/}},l.hungary={calcs:function(r){for(var e,i=0,t=0;7>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i=10-i%10,10===i&&(i=0),e=+r.slice(7,8),i===e},rules:{multipliers:[9,7,3,1,9,7,3],regex:/^(HU)(\d{8})$/}},l.ireland={calcs:function(r){var e,i=0;/^\d[A-Z\*\+]/.test(r)&&(r="0"+r.substring(2,7)+r.substring(0,1)+r.substring(7,8));for(var t=0;7>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return/^\d{7}[A-Z][AH]$/.test(r)&&(i+="H"===r.charAt(8)?72:9),i%=23,i=0===i?"W":String.fromCharCode(i+64),e=r.slice(7,8),i===e},rules:{multipliers:[8,7,6,5,4,3,2],regex:[/^(IE)(\d{7}[A-W])$/,/^(IE)([7-9][A-Z\*\+)]\d{5}[A-W])$/,/^(IE)(\d{7}[A-W][AH])$/]}},l.italy={calcs:function(r){var e,i,t=0;if(0===+r.slice(0,7))return!1;if(e=+r.slice(7,10),1>e||e>201&&999!==e&&888!==e)return!1;for(var s=0;10>s;s++)e=+r.charAt(s)*this.rules.multipliers[s],t+=e>9?Math.floor(e/10)+e%10:e;return t=10-t%10,t>9&&(t=0),i=+r.slice(10,11),t===i},rules:{multipliers:[1,2,1,2,1,2,1,2,1,2],regex:/^(IT)(\d{11})$/}},l.latvia={calcs:function(r){var e,i=0;if(/^[0-3]/.test(r))return!!/^[0-3][0-9][0-1][0-9]/.test(r);for(var t=0;10>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i%11===4&&9===r[0]&&(i-=45),i%11===4?i=4-i%11:i%11>4?i=14-i%11:4>i%11&&(i=3-i%11),e=+r.slice(10,11),i===e},rules:{multipliers:[9,1,4,8,3,10,2,5,7,6],regex:/^(LV)(\d{11})$/}},l.lithunia={calcs:function(r){var e,i=0;if(9===r.length){if(!/^\d{7}1/.test(r))return!1;i=0;for(var t=0;8>t;t++)i+=+r.charAt(t)*(t+1);if(i%11===10){i=0;for(var s=0;8>s;s++)i+=+r.charAt(s)*this.rules.multipliers["short"][s]}return i%=11,10===i&&(i=0),e=+r.slice(8,9),i===e}if(!/^\d{10}1/.test(r))return!1;i=0;for(var l=0;11>l;l++)i+=+r.charAt(l)*this.rules.multipliers.med[l];if(i%11===10){i=0;for(var u=0;11>u;u++)i+=+r.charAt(u)*this.rules.multipliers.alt[u]}return i%=11,10===i&&(i=0),e=+r.slice(11,12),i===e},rules:{multipliers:{"short":[3,4,5,6,7,8,9,1],med:[1,2,3,4,5,6,7,8,9,1,2],alt:[3,4,5,6,7,8,9,1,2,3,4]},regex:/^(LT)(\d{9}|\d{12})$/}},l.luxembourg={calcs:function(r){var e=+r.slice(6,8),i=+r.slice(0,6)%89;return i===e},rules:{regex:/^(LU)(\d{8})$/}},l.malta={calcs:function(r){for(var e,i=0,t=0;6>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i=37-i%37,e=+r.slice(6,8),i===e},rules:{multipliers:[3,4,6,7,8,9],regex:/^(MT)([1-9]\d{7})$/}},l.netherlands={calcs:function(r){for(var e,i=0,t=0;8>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i%=11,i>9&&(i=0),e=+r.slice(8,9),i===e},rules:{multipliers:[9,8,7,6,5,4,3,2],regex:/^(NL)(\d{9})B\d{2}$/}},l.norway={calcs:function(r){for(var e,i=0,t=0;8>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i=11-i%11,11===i&&(i=0),10>i?(e=+r.slice(8,9),i===e):void 0},rules:{multipliers:[3,2,7,6,5,4,3,2],regex:/^(NO)(\d{9})$/}},l.poland={calcs:function(r){for(var e,i=0,t=0;9>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i%=11,i>9&&(i=0),e=+r.slice(9,10),i===e},rules:{multipliers:[6,5,7,2,3,4,5,6,7],regex:/^(PL)(\d{10})$/}},l.portugal={calcs:function(r){for(var e,i=0,t=0;8>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i=11-i%11,i>9&&(i=0),e=+r.slice(8,9),i===e},rules:{multipliers:[9,8,7,6,5,4,3,2],regex:/^(PT)(\d{9})$/}},l.romania={calcs:function(r){for(var e,i=0,t=r.length,s=this.rules.multipliers.slice(10-t),l=0;l<r.length-1;l++)i+=+r.charAt(l)*s[l];return i=10*i%11,10===i&&(i=0),e=+r.slice(r.length-1,r.length),i===e},rules:{multipliers:[7,5,3,2,1,7,5,3,2],regex:/^(RO)([1-9]\d{1,9})$/}},l.russia={calcs:function(r){var e,i,t=0;if(10===r.length){for(var s=0;10>s;s++)t+=+r.charAt(s)*this.rules.multipliers.m_1[s];return t%=11,t>9&&(t%=10),e=+r.slice(9,10),t===e}if(12===r.length){for(var l=0,u=0,a=0;11>a;a++)l+=+r.charAt(a)*this.rules.multipliers.m_2[a];l%=11,l>9&&(l%=10);for(var c=0;11>c;c++)u+=+r.charAt(c)*this.rules.multipliers.m_3[c];return u%=11,u>9&&(u%=10),e=l===+r.slice(10,11),i=u===+r.slice(11,12),e&&i}},rules:{multipliers:{m_1:[2,4,10,3,5,9,4,6,8,0],m_2:[7,2,4,10,3,5,9,4,6,8,0],m_3:[3,7,2,4,10,3,5,9,4,6,8,0]},regex:/^(RU)(\d{10}|\d{12})$/}},l.serbia={calcs:function(r){for(var e,i=10,t=0,s=0;8>s;s++)t=(+r.charAt(s)+i)%10,0===t&&(t=10),i=2*t%11;var l=1;return e=(i+ +r.slice(8,9))%10,e===l},rules:{regex:/^(RS)(\d{9})$/}},l.slovakia_republic={calcs:function(r){var e=0,i=r%11;return i===e},rules:{regex:/^(SK)([1-9]\d[2346-9]\d{7})$/}},l.slovenia={calcs:function(r){for(var e,i=0,t=0;7>t;t++)i+=+r.charAt(t)*this.rules.multipliers[t];return i=11-i%11,10===i&&(i=0),e=+r.slice(7,8),!(11===i||i!==e)},rules:{multipliers:[8,7,6,5,4,3,2],regex:/^(SI)([1-9]\d{7})$/}},l.spain={calcs:function(r){var e,i,t=0,s=0;if(this.rules.additional[0].test(r)){for(t=0;7>t;t++)e=r.charAt(t+1)*this.rules.multipliers[t],s+=e>9?Math.floor(e/10)+e%10:e;return s=10-s%10,10===s&&(s=0),i=+r.slice(8,9),s===i}if(this.rules.additional[1].test(r)){for(t=0;7>t;t++)e=r.charAt(t+1)*this.rules.multipliers[t],s+=e>9?Math.floor(e/10)+e%10:e;return s=10-s%10,s=String.fromCharCode(s+64),i=r.slice(8,9),s===i}if(this.rules.additional[2].test(r)){var l=r;return"Y"===l.substring(0,1)&&(l=l.replace(/Y/,"1")),"Z"===l.substring(0,1)&&(l=l.replace(/Z/,"2")),i="TRWAGMYFPDXBNJZSQVHLCKE".charAt(+l.substring(0,8)%23),l.charAt(8)===i}return this.rules.additional[3].test(r)?(i="TRWAGMYFPDXBNJZSQVHLCKE".charAt(+r.substring(1,8)%23),r.charAt(8)===i):!1},rules:{multipliers:[2,1,2,1,2,1,2],regex:[/^(ES)([A-Z]\d{8})$/,/^(ES)([A-HN-SW]\d{7}[A-J])$/,/^(ES)([0-9YZ]\d{7}[A-Z])$/,/^(ES)([KLMX]\d{7}[A-Z])$/],additional:[/^[A-H|J|U|V]\d{8}$/,/^[A-H|N-S|W]\d{7}[A-J]$/,/^[0-9|Y|Z]\d{7}[A-Z]$/,/^[K|L|M|X]\d{7}[A-Z]$/]}},l.sweden={calcs:function(r){for(var e,i,t=0,s=0;9>s;s+=2)i=+r.charAt(s),t+=Math.floor(i/5)+2*i%10;for(var l=0,u=1;9>u;u+=2)l+=+r.charAt(u);var a=(10-(t+l)%10)%10;return e=+r.slice(9,10),a===e},rules:{regex:/^(SE)(\d{10}01)$/}},l.switzerland={calcs:function(r){for(var e=0,i=0;8>i;i++)e+=+r.charAt(i)*this.rules.multipliers[i];if(e=11-e%11,10===e)return!1;11===e&&(e=0);var t=+r.substr(8,1);return e===t},rules:{multipliers:[5,4,3,2,7,6,5,4],regex:/^(CHE)(\d{9})(MWST)?$/}},l.united_kingdom={calcs:function(r){var e,i=0;if("GD"===r.substr(0,2))return e=500,r.substr(2,3)<e;if("HA"===r.substr(0,2))return e=499,r.substr(2,3)>e;if(0===+r.slice(0))return!1;for(var t=+r.slice(0,7),s=0;7>s;s++)i+=+r.charAt(s)*this.rules.multipliers[s];for(var l=i;l>0;)l-=97;return l=Math.abs(l),l===+r.slice(7,9)&&9990001>t&&(1e5>t||t>999999)&&(9490001>t||t>97e5)?!0:(l>=55?l-=55:l+=42,e=+r.slice(7,9),!!(l===e&&t>1e6))},rules:{multipliers:[8,7,6,5,4,3,2],regex:[/^(GB)?(\d{9})$/,/^(GB)?(\d{12})$/,/^(GB)?(GD\d{3})$/,/^(GB)?(HA\d{3})$/]}},"object"==typeof module&&module.exports&&(module.exports=u),u}();
//# sourceMappingURL=jsvat.min.js.map
